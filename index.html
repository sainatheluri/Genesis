<!DOCTYPE html>
<html>

<head>
    <title>Genesis Generator</title>
    <script type="text/javascript" src="blockly_compressed.js"></script>
    <script type="text/javascript" src="blocks_compressed.js"></script>
    <script type="text/javascript" src="msg/js/en.js"></script>
    <script type="text/javascript" src="generators/genesis.js"></script>
    <script type="text/javascript" src="generators/genesis/lists.js"></script>
    <script type="text/javascript" src="generators/genesis/logic.js"></script>
    <script type="text/javascript" src="generators/genesis/loops.js"></script>
    <script type="text/javascript" src="generators/genesis/math.js"></script>
    <script type="text/javascript" src="generators/genesis/text.js"></script>
    <script type="text/javascript" src="generators/genesis/variables.js"></script>
    <script type="text/javascript" src="demos/prettify.js"></script>
    <script type="text/javascript" src="acorn_interpreter.js"></script>
    <script type="text/javascript" src="custom_blocks.js"></script>
    <link rel="stylesheet" type="text/css" href="demos/prettify.css">
    <link rel="stylesheet" type="text/css" href="generator.css">
</head>

<body>
    <div class="app-container">
        <div id="blocklyDiv" class="main blockly-panel"></div>
        <div id="codeDiv" class="main output-panel">
            <pre></pre>
        </div>
    </div>
    <xml id="toolbox" style="display: none">
        <category id="catLogic" colour="210" name="Logic">
            <block type="controls_if"></block>
            <block type="logic_compare"></block>
            <block type="logic_operation"></block>
            <block type="logic_negate"></block>
            <block type="logic_boolean"></block>
            <block type="logic_null"></block>
        </category>
        <category id="catLoops" colour="120" name="Loops">
            <block type="controls_whileUntil"></block>
        </category>
        <category id="catMath" colour="230" name="Math">
            <block type="math_number"></block>
            <block type="math_arithmetic">
                <value name="A">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
                <value name="B">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
            </block>
            <block type="math_single">
                <value name="NUM">
                    <shadow type="math_number">
                        <field name="NUM">9</field>
                    </shadow>
                </value>
            </block>
            <block type="math_number_property">
                <value name="NUMBER_TO_CHECK">
                    <shadow type="math_number">
                        <field name="NUM">0</field>
                    </shadow>
                </value>
            </block>
            <block type="math_change">
                <value name="DELTA">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
            </block>
            <block type="math_round">
                <value name="NUM">
                    <shadow type="math_number">
                        <field name="NUM">3.1</field>
                    </shadow>
                </value>
            </block>
            <block type="math_on_list"></block>
            <block type="math_modulo">
                <value name="DIVIDEND">
                    <shadow type="math_number">
                        <field name="NUM">64</field>
                    </shadow>
                </value>
                <value name="DIVISOR">
                    <shadow type="math_number">
                        <field name="NUM">10</field>
                    </shadow>
                </value>
            </block>
            <block type="math_random_int">
                <value name="FROM">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
                <value name="TO">
                    <shadow type="math_number">
                        <field name="NUM">100</field>
                    </shadow>
                </value>
            </block>
        </category>
        <category id="catText" colour="160" name="Text">
            <block type="text"></block>
            <block type="text_print">
                <value name="TEXT">
                    <shadow type="text">
                        <field name="TEXT">abc</field>
                    </shadow>
                </value>
            </block>
        </category>
        <category id="catLists" colour="260" name="Lists">
            <block type="lists_create_with">
                <mutation items="0"></mutation>
            </block>
            <block type="lists_create_with"></block>
            <block type="lists_length"></block>
            <block type="lists_isEmpty"></block>
            <block type="lists_getIndex">
                <value name="VALUE">
                    <block type="variables_get">
                        <field name="VAR">list</field>
                    </block>
                </value>
            </block>
            <block type="lists_setIndex">
                <value name="LIST">
                    <block type="variables_get">
                        <field name="VAR">list</field>
                    </block>
                </value>
            </block>
            <block type="lists_insert">
                <value name="LIST">
                    <block type="variables_get">
                        <field name="VAR">list</field>
                    </block>
                </value>
            </block>
        </category>
        <category id="catVariables" colour="330" custom="VARIABLE" name="Variables"></category>
    </xml>
    <xml id="blocklyDefault" style="display: none">
    </xml>
    <script>
        var workspace = Blockly.inject('blocklyDiv', {
            toolbox: document.getElementById('toolbox')
        });
        var defaultBlocks = document.getElementById('blocklyDefault');
        Blockly.Xml.domToWorkspace(defaultBlocks, workspace);

        function myUpdateFunction(event) {
            var codeDiv = document.getElementById('codeDiv');
            var codeHolder = document.createElement('pre');
            codeHolder.className = 'prettyprint but-not-that-pretty';
            var code = document.createTextNode(Blockly.Genesis.workspaceToCode(workspace));
            codeHolder.appendChild(code);
            codeDiv.replaceChild(codeHolder, codeDiv.lastElementChild);
            prettyPrint();
        }
        workspace.addChangeListener(myUpdateFunction);
    </script>
</body>

</html>


